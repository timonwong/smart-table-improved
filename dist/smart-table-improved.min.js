/*
 * angular-smart-table-improved v0.2.0
 * https://github.com/timonwong/smart-table-improved
 *
 * (c) 2015 Timon Wong
 * License: MIT
 */
!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?a(require("angular")):"function"==typeof define&&define.amd?define(["angular"],a):a(e.angular$1)}(this,function(e){"use strict";function a(a){function t(t,i,r,s){function l(){var e=s.tableState().pagination,a=t.currentPage;t.currentPage=Math.floor(e.start/e.number)+1,t.totalItemCount=e.totalItemCount,t.numPages=e.numberOfPages,t.pages=n(t.currentPage,e.totalItemCount,t.itemsPerPage,g),t.range.lower=e.start+1,t.range.upper=e.start+e.number+1,a!==t.currentPage&&t.onPageChange({newPage:t.currentPage})}t.itemsPerPage=t.itemsPerPage?t.itemsPerPage:a.itemsPerPage,t.maxSize=t.maxSize?t.maxSize:a.maxSize,t.autoHide=e.isDefined(t.autoHide)?t.autoHide:!1,t.directionLinks=e.isDefined(r.directionLinks)?t.$parent.$eval(r.directionLinks):!0,t.boundaryLinks=e.isDefined(r.boundaryLinks)?t.$parent.$eval(r.boundaryLinks):!1,t.paginationClass=r.paginationClass||"";var g=Math.max(t.maxSize,5);t.pages=[],t.pagination={last:1,current:1},t.range={lower:1,upper:1},t.$watch(function(){return s.tableState().pagination},l,!0),t.$watch("itemsPerPage",function(e,a){e!==a&&t.selectPage(1)}),t.selectPage=function(e){e>0&&e<=t.numPages&&s.slice((e-1)*t.itemsPerPage,t.itemsPerPage)},t.tracker=function(e,a){return e+"_"+a},s.tableState().pagination.number||s.slice(0,t.itemsPerPage)}function n(e,a,t,n){var r=[],s=Math.ceil(a/t),l=Math.ceil(n/2),g=void 0;g=l>=e?"start":e>s-l?"end":"middle";for(var u=s>n,o=1;s>=o&&n>=o;){var c=i(o,e,n,s),m=2===o&&("middle"===g||"end"===g),d=o===n-1&&("middle"===g||"start"===g);u&&(m||d)?r.push("..."):r.push(c),o++}return r}function i(e,a,t,n){var i=Math.ceil(t/2);return e===t?n:1===e?e:n>t?a>n-i?n-t+e:a>i?a-i+e:e:e}return{restrict:"EA",require:"^stTable",scope:{itemsPerPage:"=?",maxSize:"=?",onPageChange:"&",autoHide:"=?",currentPage:"=?",totalItemCount:"=?"},templateUrl:function(e,t){return t.templateUrl||a.templateUrl},link:t}}e="default"in e?e["default"]:e,e.module("smart-table-improved.templates",[]),e.module("smart-table-improved",["smart-table","smart-table-improved.templates"]),e.module("smart-table-improved").constant("stiPaginationConfig",{itemsPerPage:10,maxSize:10,templateUrl:"sti/template/sti-pagination.html"}).directive("stiPagination",a),a.$inject=["stiPaginationConfig"],angular.module("smart-table-improved.templates").run(["$templateCache",function(e){e.put("sti/template/sti-pagination.html",'<ul class="pagination {{ paginationClass }}" ng-if="pages.length > 1 || !autoHide">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: currentPage === 1}">\n    <a href="" ng-click="selectPage(1)">&laquo;</a>\n  </li>\n  <li ng-if="::directionLinks" ng-class="{disabled: currentPage === 1}">\n    <a href="" ng-click="selectPage(currentPage - 1)">&lsaquo;</a>\n  </li>\n  <li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{active: currentPage === pageNumber, disabled: pageNumber === \'...\'}" class="pagenumbers">\n    <a href="" ng-click="selectPage(pageNumber)">{{ pageNumber }}</a>\n  </li>\n  <li ng-if="::directionLinks" ng-class="{disabled: currentPage === numPages}">\n    <a href="" ng-click="selectPage(currentPage + 1)">&rsaquo;</a>\n  </li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: currentPage === numPages}">\n    <a href="" ng-click="selectPage(numPages)">&raquo;</a>\n  </li>\n</ul>\n')}])});